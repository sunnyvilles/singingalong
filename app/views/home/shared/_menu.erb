<link href='http://fonts.googleapis.com/css?family=Maven+Pro:400,500,700' rel='stylesheet' type='text/css'></link>
<link href='http://fonts.googleapis.com/css?family=Merriweather:400,700,300,400italic' rel='stylesheet' type='text/css'></link>
<script src="/scripts/jquery.validate.min.js"></script>
<script src='//www.google.com/jsapi' type='text/javascript'></script>

<style>	
	body{
		font-family: 'Maven Pro';
		margin: 0;
	}
	.header{
		height: 39px;
		border-top: 1px solid #525355;
		background-image: url("/images/submenu-bg.jpg");
		background-repeat: repeat-x;
		min-width: 980px;
	}
	.headerCt{
		width: 980px;
		margin: auto;
	}
	.headerCt > ul{
		height: 39px;
	}
	.headerCt > ul >li{
		position: relative;
		bottom: 1px;
	}
	.headerCt > ul >li.academy{
		right: 4px;
	}
	.headerCt .menuItems li.clinic.selected, .headerCt .menuItems li.clinic:hover{
		background-image: url("/images/sprite.png");
		background-position: -1074px -49px;
	}
	.headerCt .menuItems li.academy.selected, .headerCt .menuItems li.academy.item:hover{
		background-image: url("/images/sprite.png");
		background-position: -1426px -49px;
	}
	.headerCt .menuItems li.academy.selected{

	}
	.headerCt .menuItems li{
		display: inline;
		color: white;
	}

	.headerCt .menuItems li.item{
		padding: 12px 14px;
		height: 20px;
		font-size: 10pt;
		display: inline-block;
		letter-spacing: 1px;
	}
	.tosLogo{
		display: inline-block;
		height: 38px;
		width: 161px;
		background-position: -509px -59px;
	}

	.contentWrap{
		min-height: 400px;
		width: 980px;
		margin: auto;
		bottom: 0;
		position: relative;
	}
	.loginBox{
		display: inline-block;
		padding: 4px 10px;
		background-image: url("/images/sprite.png");
		background-position: -244px -10px;
		cursor: pointer;
		position: relative;
		margin-left: 22px;
		font-size: 9pt;
		top: -1px;
	}
	.logoutBox{
		display: inline-block;
		padding: 4px 10px;
		background-image: url("/images/sprite.png");
		background-position: -244px -10px;
		cursor: pointer;
		position: relative;
		margin-left: 22px;
		font-size: 9pt;
		top: -1px;
	}
	.loginText{
		padding-right: 3px;
		position: relative;
		bottom: 1px;
		letter-spacing: 1px;
	}

	.downArrow{
		width: 16px;
		height: 16px;
		background-position: -128px -28px;
		position: relative;
		bottom: -1px;
	}
	.search{
		height: 22px;
		width: 212px;
		position: relative;
		bottom: 2px;
		background-color: #bdbdbd;
		border: none;
		left: 30px;
	}
	.searchIcon{
		height: 27px;
		width: 24px;
		background-position: -152px -16px;
		position: relative;
		right: 12px;
		top: 3px;
	}
	.loginBox .loginPanel{
		display: none;
		position: absolute;
		height: 124px;/*old 120px*/
		width: 228px; 
		background-color: #ededed;
		z-index: 11;
		top: 38px;
		right: -98px;
		padding: 16px;
		padding-bottom: 19px;
	}
.logoutBox .logoutPanel{
		display: none;
		position: absolute;
		height: 60px;
		width: 228px;
		background-color: #ededed;
		z-index: 11;
		top: 38px;
		right: -82px;
		padding: 16px;
		padding-bottom: 19px;
	}

	.loginBox:hover .loginPanel{
		/*display: block;*/
	}
	.loginPanel input,.logoutPanel input{
		width: 218px;
		height: 20px;
		margin-bottom: 10px;
		padding-left: 8px;
		font-size: 10pt;
		color: #636363 !important;
	}
	.loginPanel span{
		font-size: 8pt;
		color: #525355;
		padding-bottom: 5px;
	}

	span.signupError{         /*HHHHHHHHHHHHEY M HERE*/
		display: block;
		width: 136px;
		overflow: hidden;
		float:left;
	}

	.logoutPanel span{
		font-size: 8pt;
		color: #525355;
		display: block;
		margin-bottom: 8px;
	}

	.logoutPanel span.user{
		font-size: 11pt;
		color: #525355;

	
	}

	.loginPanel span.signup_btn{
		color: #fff;
		font-size: 8pt;
		left: 25px;
		letter-spacing: 1px;
	}
	.loginPanel input[type="submit"],.logoutPanel input[type="button"]{
		width: 70px;
		background-position: -243px -13px;
		border: none;
		height: 22px;
		color: #fff !important;
		margin-bottom: 8px;
		font-size: 8pt;
		letter-spacing: 1px;
	}
	.uptri{
		border-color: transparent transparent #ededed;
		border-style: solid;
		border-width: 0 10px 10px;
		height: 0;
		position: absolute;
		width: 0;
		z-index: 0;
		top: 0;
		display: inline-block;
		position: absolute;
		top: -10px;
		left: 112px;
	}


	.signup_btn{
		border: 1px solid #589913;
		font-size: 12px;
		font-family: arial, helvetica, sans-serif;
		padding: 4px 7px 3px 7px;
		text-decoration: none;
		display: inline-block;
		color: #FFFFFF !important;
		background-image: url("/images/green-btn.png");
		background-position: -1px -1px;
		position: relative;
		left: 10px;
	}

	.signup_btn:hover{
		/*	opacity: .67;
		 border:1px solid #41700e;
		 background-color: #5b9e13; background-image: -webkit-gradient(linear, left top, left bottom, from(#5b9e13), to(#8ebe0d));
		 background-image: -webkit-linear-gradient(top, #5b9e13, #8ebe0d);
		 background-image: -moz-linear-gradient(top, #5b9e13, #8ebe0d);
		 background-image: -ms-linear-gradient(top, #5b9e13, #8ebe0d);
		 background-image: -o-linear-gradient(top, #5b9e13, #8ebe0d);
		 background-image: linear-gradient(to bottom, #5b9e13, #8ebe0d);filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=#5b9e13, endColorstr=#8ebe0d); 
		opacity: .67;*/

	}

.loginSubmitBtn {
	margin-bottom: 4px;
}


/*google custom search*/



  .gsc-control-cse {
    font-family: Arial, sans-serif;
    background-color: transparent;
  }
  .gsc-control-cse .gsc-table-result {
    font-family: Arial, sans-serif;
  }
  input.gsc-input, .gsc-input-box, .gsc-input-box-hover, .gsc-input-box-focus {
    border-color: #D9D9D9;
  }
  input.gsc-search-button, input.gsc-search-button:hover, input.gsc-search-button:focus {
    border-color: #666666;
    background-color: #CECECE;
    background-image: none;
    filter: none;

  }
  .gsc-tabHeader.gsc-tabhInactive {
    border-color: #FF9900;
    background-color: #FFFFFF;
  }
  .gsc-tabHeader.gsc-tabhActive {
    border-color: #E9E9E9;
    background-color: #E9E9E9;
    border-bottom-color: #FF9900
  }
  .gsc-tabsArea {
    border-color: #FF9900;
  }
  .gsc-webResult.gsc-result, .gsc-results .gsc-imageResult {
    border-color: #FFFFFF;
    background-color: #FFFFFF;
  }
  .gsc-webResult.gsc-result:hover, .gsc-imageResult:hover {
    border-color: #FFFFFF;
    background-color: #FFFFFF;
  }
  .gs-webResult.gs-result a.gs-title:link, .gs-webResult.gs-result a.gs-title:link b, .gs-imageResult a.gs-title:link, .gs-imageResult a.gs-title:link b  {
    color: #0000CC;
  }
  .gs-webResult.gs-result a.gs-title:visited, .gs-webResult.gs-result a.gs-title:visited b, .gs-imageResult a.gs-title:visited, .gs-imageResult a.gs-title:visited b {
    color: #0000CC;
  }
  .gs-webResult.gs-result a.gs-title:hover, .gs-webResult.gs-result a.gs-title:hover b, .gs-imageResult a.gs-title:hover, .gs-imageResult a.gs-title:hover b {
    color: #0000CC;
  }
  .gs-webResult.gs-result a.gs-title:active, .gs-webResult.gs-result a.gs-title:active b, .gs-imageResult a.gs-title:active, .gs-imageResult a.gs-title:active b {
    color: #0000CC;
  }
  .gsc-cursor-page {
    color: #0000CC;
  }
  a.gsc-trailing-more-results:link {
    color: #0000CC;
  }
  .gs-webResult .gs-snippet, .gs-imageResult .gs-snippet, .gs-fileFormatType {
    color: #000000;
  }
  .gs-webResult div.gs-visibleUrl, .gs-imageResult div.gs-visibleUrl {
    color: #008000;
  }
  .gs-webResult div.gs-visibleUrl-short {
    color: #008000;
  }
  .gs-webResult div.gs-visibleUrl-short  {
    display: none;
  }
  .gs-webResult div.gs-visibleUrl-long {
    display: block;
  }
  .gs-promotion div.gs-visibleUrl-short {
    display: none;
  }
  .gs-promotion div.gs-visibleUrl-long  {
    display: block;
  }
  .gsc-cursor-box {
    border-color: #FFFFFF;
  }
  .gsc-results .gsc-cursor-box .gsc-cursor-page {
    border-color: #E9E9E9;
    background-color: #FFFFFF;
    color: #0000CC;
  }
  .gsc-results .gsc-cursor-box .gsc-cursor-current-page {
    border-color: #FF9900;
    background-color: #FFFFFF;
    color: #0000CC;
  }
  .gsc-webResult.gsc-result.gsc-promotion {
    border-color: #336699;
    background-color: #FFFFFF;
  }
  .gsc-completion-title {
    color: #0000CC;
  }
  .gsc-completion-snippet {
    color: #000000;
  }
  .gs-promotion a.gs-title:link,.gs-promotion a.gs-title:link *,.gs-promotion .gs-snippet a:link  {
    color: #0000CC;
  }
  .gs-promotion a.gs-title:visited,.gs-promotion a.gs-title:visited *,.gs-promotion .gs-snippet a:visited {
    color: #0000CC;
  }
  .gs-promotion a.gs-title:hover,.gs-promotion a.gs-title:hover *,.gs-promotion .gs-snippet a:hover  {
    color: #0000CC;
  }
  .gs-promotion a.gs-title:active,.gs-promotion a.gs-title:active *,.gs-promotion .gs-snippet a:active {
    color: #0000CC;
  }
  .gs-promotion .gs-snippet, .gs-promotion .gs-title .gs-promotion-title-right, .gs-promotion .gs-title .gs-promotion-title-right * {
    color: #000000;
  }
  .gs-promotion .gs-visibleUrl,.gs-promotion .gs-visibleUrl-short  {
    color: #008000;
  }
  div.gsc-control-cse , div.gsc-control-cse-en{
  	padding:0px 0px 0px 0px;
  	border: 0px solid transparent;
  	background: transparent;
  }

#cse{
	height: 18px;
		width: 250px;
		
		background-color: transparent;
		border: none;
	display: inline-block;
	float:right;
	margin-top: -40px;
	margin-left: 10px;
}

</style>


<div class="header">
	<div class="headerCt">
		<a href="/"><span class="tosLogo floatLeft spriteIcon"></span></a>
		
		
			<ul class="floatRight menuItems">
				<%if !["admin"].include?( params[:controller].split("/")[0] )%>
					<li class="clinic item <%=params[:controller] == "web/clinic" ? "selected" : ""%>"><a href="/clinic"><%= t "header.clinic" %></a></li>
					<li class="academy item <%=params[:controller] == "web/academy" ? "selected" : ""%>"><a href="/academy"><%= t "header.academy" %></a></li>
				<%end%>
				<li class="<%= (["admin"].include? params[:controller].split("/")[0]) ? "adminlogout" : ""%>">
					<%if session[:user_id].present?%>
						<div class="logoutBox">
							<span class="loginText"><%= t "header.logout"%></span>
							<span class="spriteIcon downArrow"></span>
							<div class="logoutPanel">
								<div class="uptri"></div>
								<span class="links">You are Logged in as :</span>
								<span class="user subheader"><%=session[:email]%> </span>
							<input class="spriteIcon floatRight logoutBtn" type="button" value="LOGOUT"/>
							</div>

						</div>
					<%else%>
						<div class="loginBox">
							<span class="loginText"><%= t "header.login"%></span>
							<span class="spriteIcon downArrow"></span>

							<div class="loginPanel">
								<div class="uptri"></div>
								<form action="/user/attempt-login" method="POST" id="loginForm">
									
									<input type="email" id="email" name="email" placeholder="Email"></input>
									<input type="password" id="password" name="password" placeholder="Password"></input>
									
									<div class="loginSubmitBtn">
									<input class="spriteIcon" type="submit" value="<%= t "header.login" %>" onClick="submitForm()"></input>

									<span><%= t "header.forgotPassword" %></span><br />
									</div>
									
									<input type="password" name="password_confirm" placeholder="Retype Password" class="signupPasswordField" style="display:none"></input>
									
									<span class="signupError"><%= t "header.noAccount" %></span>
									<span class="signup_btn"><%= t "header.signup" %></span>
								</form>
							</div>
						</div>
							
					<%end%>				
				</li>
			
				<%if !["admin"].include?( params[:controller].split("/")[0] )%>
					<li>
						<div id='cse'>Loading</div>
<script type='text/javascript'>

</script>
						
					</li>
				<%end%>
			</ul>
				
	</div>
</div>

<script>

	var loginput = $('#loginForm :input')

	$("body").click(function(evt){
		$(".loginSubmitBtn").css({
			display:'block'
		});
		$(".signupPasswordField,.loginPanel,.logoutPanel").css({
			display:'none'
		});
		
		$('#loginForm').removeData('validator');
		(loginput[1] && loginput[1].placeholder) ? loginput[1].placeholder = "Password" : "";
		$('.signupError').text("<%= t "header.noAccount" %>");
		//shitty fix for a shitty problem
		if(loginput[0] && loginput[1] && loginput[3]){
			loginput[0].value = "";
			loginput[1].value = "";
			loginput[3].value = "";
		}
		
		
	});


	$(".loginBox").click(function(evt){
		if ($(".loginPanel").css('display') == 'none')
		{
			$(".loginPanel").css({
				display: 'block'
			});
		}
		else
		{
			if($(evt.target).attr("class") === "loginText" || $(evt.target).attr("class") === "spriteIcon downArrow"){
				$(".loginPanel").css({
					display: 'none'
				});
			}	
		if($(evt.target).attr("class") === "signup_btn"){
			if ($(".loginSubmitBtn").css('display') == 'block')
			{
				validateSignupForm();
				$(".loginSubmitBtn").css({
					display:'none'
				});
				$(".signupPasswordField").css({
					display:'block'
				});
				loginput[1].placeholder = "Password, 5 charecters at least";

			}
			else
			{

				var signupFormSubmission = function(){
				var form = $('#loginForm')
				if (form.valid()) {
				loginput[0].name = "user[email]";
				loginput[1].name = "user[password]";
				
				
				form.attr("action","/users")
				form.attr("commit","Create User")
				form.submit();
				
				 }
				}

				loginput.keypress(
			    function(event){
			     if (event.which == '13') {
			        event.preventDefault();
			        signupFormSubmission();
			      	}
				});



				signupFormSubmission();
			}


			}

		}		
		return false;
	
	});

$(".logoutBox").click(function(evt){
		if ($(".logoutPanel").css('display') == 'none')
		{
			$(".logoutPanel").css({
				display: 'block'
			});
		}
		else
		{
			if($(evt.target).attr("class") === "loginText" || $(evt.target).attr("class") === "spriteIcon downArrow"){
				$(".logoutPanel").css({
					display: 'none'
				});
			}	
				}		
		return false;

	});



	function submitForm()
	{		
		$("#loginForm").submit();
	}

	$('.logoutBtn').click(function(){
		window.location = "/user/logout"
	});



	var validateSignupForm = function(){


$('#loginForm').validate({
						        errorPlacement: function (error, element) {
						            $('.signupError').text(error.text())

						        },
						        rules: {
						            email: {
						                required: true,
						                email: true
						            },
						            password: {
						                required: true,
						                minlength: 5
						            },
									password_confirm : {
										minlength : 5,
										equalTo : "#password"
									}
								},
						        messages:{
							        password:{
							        	required: "Type your password",
							        	minlength:"need at least 5 charecters"
							        },
							        email:{
							            required: "Type your e-mail",
							            email: "not a valid e-mail"
							        },
							        password_confirm:{
							        	required:"enter password again",
							        	minlength:"need at least 5 charecters",
							        	equalTo: "password don't match"
							        }
							    },
								success: function(label) {
						            //var name = label.attr('for');
						            $('.signupError').text('')
						            //label.text(name+ ' is ok!');
						        }
						     
						    });
	
}


google.load('search', '1', {language: 'en', style: google.loader.themes.V2_DEFAULT});
google.setOnLoadCallback(function() {
  var customSearchOptions = {};
  var orderByOptions = {};
  orderByOptions['keys'] = [{label: 'Relevance', key: ''} , {label: 'Date', key: 'date'}];
  customSearchOptions['enableOrderBy'] = true;
  customSearchOptions['orderByOptions'] = orderByOptions;
  customSearchOptions['overlayResults'] = true;
  var customSearchControl =   new google.search.CustomSearchControl('008374804344308188661:rlubi_ic7vi', customSearchOptions);
  customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);
  var options = new google.search.DrawOptions();
  options.setAutoComplete(true);
  customSearchControl.draw('cse', options);
}, true);


</script>